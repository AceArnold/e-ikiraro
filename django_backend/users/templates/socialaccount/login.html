{% load i18n %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% trans "Signing in" %}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
  <p>{% blocktrans %}Signing in via {{ provider.name }} â€” you will be redirected automatically.{% endblocktrans %}</p>

  <form id="social-login-form" method="post" action="">
    {% csrf_token %}
    {% if form %}
      {{ form.as_p }}
    {% endif %}
    <noscript>
      <button type="submit">{% trans "Continue" %}</button>
    </noscript>
  </form>

  <script>
    (function(){
      // Attempt to auto-submit the provider form so users aren't shown
      // the intermediate "Sign In Via ..." page.
      var f = document.getElementById('social-login-form') || document.querySelector('form');
      if (f) {
        try { f.submit(); }
        catch(e) { console.warn('auto-submit failed', e); }
      } else {
        var btn = document.querySelector('button[type=submit]');
        if (btn) btn.click();
      }
    })();
  </script>
</body>
</html>
